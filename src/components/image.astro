---
import { getavatar } from '../getavatar';
const images = getavatar();
let avatar = images[0]; // get the first avatar
---

<picture class="image-container overflow-hidden rounded-lg transition-transform duration-300 hover:scale-105" style="width: 35%; height: 35%; min-width: 125px;">
  <source srcset={`/brand-assets/${avatar}.avif`} type="image/avif">
  <source srcset={`/brand-assets/${avatar}.webp`} type="image/webp">
  <img data-src={`/brand-assets/${avatar}.png`} alt="Avatar" class="lazy" />
</picture>

<script>
    window.onload = () => {
      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Load image
            const img = entry.target as HTMLImageElement;
            if (img.dataset.src) {
              img.src = img.dataset.src;
            }
  
            // Stop observing
            observer.unobserve(entry.target);
          }
        });
      });
  
      document.querySelectorAll('img.lazy').forEach(img => {
        observer.observe(img);
      });
    };
  </script>