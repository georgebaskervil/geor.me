---
import Analytics from "../../components/analytics.astro";
import Tags from "../../components/tags.astro";
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts")).sort(
  (first: any, second: any) =>
    new Date(second.data.publishedAt).getTime() -
    new Date(first.data.publishedAt).getTime()
);
---
<Tags />
<style>
.background-animation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to left,#110819, #000);
  z-index: -1;
}
</style>
<div class="background-animation"></div>
<Layout>

  <h1 class="text-4xl font-bold mb-10">Latest Posts:</h1>

  <article class="flex flex-col gap-4">
    <section class="grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {
        posts.map((post: any) => (
          <div class="p-4 rounded-lg border border-neutral shadow-md hover:scale-105 transition-transform duration-300">
            <h4 class="text-lg font-medium">{post.data.title}</h4>
            <p class="mt-2">
              {post.data.publishedAt.toLocaleDateString("en-us", {
                year: "numeric",
                month: "short",
                day: "numeric",
              })}
            </p>
            <p class="mt-2">
              {post.data.description}
            </p>
            <a href={"/posts/" + post.slug} class="text-purple-500 mt-4 no-underline hover:underline">
              Read post
            </a>
          </div>
        ))
      }
    </section>
  </article>
</Layout>
<Analytics />